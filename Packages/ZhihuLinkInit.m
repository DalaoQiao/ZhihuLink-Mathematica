Needs["GeneralUtilities`"];$ZhihuLinkMarkdown::usage = "ZhihuLink 的缓存目录.";$ZhihuLinkDirectory::usage = "ZhihuLink 的缓存目录.";$ZhihuCookie::usage ="";$ZhihuAuth::usage ="";ZhihuLinkInit::usage ="";Begin["`Private`"];$ZhihuLinkDirectory=FileNameJoin[{$UserBaseDirectory,"ApplicationData","ZhihuLink"}];ZhihuLinkGetCheck[];ZhihuLinkInit[] :=Block[{zc0},$ZhihuCookie = Import[FindFile["zhihu.cookie"]];zc0=Select[StringSplit[StringDelete[$ZhihuCookie," "],";"],StringTake[#,5]=="z_c0="&];$ZhihuAuth="Bearer "<>StringTake[First@zc0,6;;-1];];If[FindFile["zhihu.cookie"] === $Failed,$ZhihuCookie = "";"未检测到 zhihu.cookie 文件\n请使用 ZhihuCookiesReset[] 设置你的cookies.",$ZhihuCookie = Import@FindFile["zhihu.cookie"]];ZhihuCookiesReset[]:=CreateDialog[{TextCell["粘贴你的Cookies(不需要是字符型)"],InputField[Dynamic[$ZhihuCookies],String,ImageSize->{400,400/GoldenRatio^2}],DefaultButton[DialogReturn[$ZhihuCookies]]},WindowTitle->"需要Token"];Quiet[CreateDirectory/@{$ZhihuLinkMarkdown}];$ZhihuLinkMarkdown=FileNameJoin[{$UserBaseDirectory,"ApplicationData","HTML2Markdown","Zhihu"}];End[] ;SetAttributes[{},{Protected,ReadProtected}];;